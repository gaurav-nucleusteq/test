name: Deploy Model

on:
  workflow_dispatch:
    inputs:
      callback_url:
        required: true
        type: string
      token:
        required: true
        type: string

jobs:
  call-api:
    runs-on: ubuntu-latest
    steps:
      - name: Call Public API with Bearer Token and Fixed Body
        run: |
          echo "Calling public API..."

          RESPONSE=$(curl -s -X POST https://api.dev.nuodata.io/nova-ai/v1/asset/list \
            -H "Authorization: Bearer ${{ github.event.inputs.token }}" \
            -H "Content-Type: application/json" \
            -d '{
              "visibility_scope": ["workspace"],
              "scope_element_ids": ["66fb931d35dedf279acffd75"]
            }')

          echo "API response:"
          echo "$RESPONSE"
